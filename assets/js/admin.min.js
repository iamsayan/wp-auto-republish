function wparOpenPopup(e,t,a,n){let r=window.outerHeight/2+window.screenY-n/2,o=window.outerWidth/2+window.screenX-a/2;return window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+a+", height="+n+", top="+r+", left="+o)}(function(e){"use strict";function t(t,a){let n=a.data("reload"),r=e.dialog({title:rvpAdminL10n.processing,content:rvpAdminL10n.under_process,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e.ajax({url:rvpAdminL10n.api.root+"revivepress/v1/toolsAction",method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",rvpAdminL10n.api.nonce)},data:{action:t}}).always(function(){a.removeAttr("disabled")}).fail(function(t){r.close(),e(".wpar-wrap .notice.tools").remove(),e(".wpar-wrap").prepend('<div class="notice notice-error tools"><p><strong>'+t.statusText+"</strong>: "+t.responseJSON.message+"</p></div>"),e("html, body").animate({scrollTop:0},"slow")}).done(function(t){r.close(),e(".wpar-wrap .notice.tools").remove(),e(".wpar-wrap").prepend('<div class="notice notice-success tools"><p>'+t+"</p></div>"),e("html, body").animate({scrollTop:0},"slow"),"yes"===n&&setTimeout(function(){window.location.reload()},2e3)})}if("undefined"==typeof rvpAdminL10n)return!1;const a={general:"configure",single:"metabox",actions:"manual",social:"social-general"};let n=e("#wpar-nav-container").find("a.wpar-tab:not(.type-link)");for(let t=0;t<n.length;t++)e(n[t]).on("click",function(t){t.preventDefault();let n=e(this).attr("id").replace("wpar-tab-","");if(e("a.is-active").removeClass("is-active"),e(this).addClass("is-active"),e(".wpar-metabox .wpar-"+n).removeClass("d-none"),e(".wpar-metabox .postbox:not(.wpar-"+n+"), .wpar-metabox .sub-links:not(.wpar-"+n+")").addClass("d-none"),localStorage.setItem("wpar_active_tab",n),Object.keys(a).includes(n)){let t=localStorage.getItem("wpar_"+n+"_active_tab");t||(t=a[n]),e(".wpar-wrap").find("a.sub-link-"+t).trigger("click")}});setTimeout(function(){let t=localStorage.getItem("wpar_active_tab");t?e("#wpar-nav-container").find("a#wpar-tab-"+t).trigger("click"):e("#wpar-nav-container").find("a#wpar-tab-general").trigger("click"),e(".rvp-loader").hide(),e(".wpar-metabox").show()},500),e("a.share-btn:not(.no-popup)").on("click",function(t){t.preventDefault(),wparOpenPopup(e(this).attr("href"),"Share Window",950,700)}),e(".wpar-upgrade").on("click",function(t){t.preventDefault();let a=e(this).attr("href");e.confirm({title:"Premium Features",content:e(".wpar-premium-popup").html(),useBootstrap:!1,draggable:!1,theme:"material",animation:"scale",type:"green",boxWidth:"25%",closeIcon:!0,scrollToPreviousElement:!1,buttons:{buttonUpgrade:{text:"Upgrade Now",btnClass:"btn-green",action:function(){window.location.href=a}}}})}),e("#wpar-settings-form").on("submit",function(){e(".wpar-save").addClass("disabled").val(rvpAdminL10n.saving);let t=e.dialog({title:rvpAdminL10n.saving,content:rvpAdminL10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});return e(this).ajaxSubmit({success:function(){t.close(),e.alert({title:rvpAdminL10n.done,content:rvpAdminL10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:rvpAdminL10n.ok_button,action:function(){"yes"==e(".wpar-wrap").attr("data-reload")&&window.location.reload()}}}}),e(".wpar-save").removeClass("disabled").val(rvpAdminL10n.save_button)},error:function(){t.close(),e.alert({title:rvpAdminL10n.error,content:rvpAdminL10n.process_failed,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:rvpAdminL10n.ok_button,action:function(){}}}})}}),!1}),e("input.wpar-copy").on("click",function(t){t.preventDefault();let a=e(this),n=a.val();a.addClass("disabled").val(rvpAdminL10n.please_wait),e.post(rvpAdminL10n.ajaxurl,{action:"wpar_process_copy_data",security:rvpAdminL10n.security},function(t,r){!0===t.success&&(navigator.clipboard.writeText(t.data.settings_data),a.removeClass("disabled").val(n),e(".wpar-copied").show().delay(1e3).fadeOut())})}),e("input.wpar-paste").on("click",function(t){t.preventDefault();let a=e.confirm({title:rvpAdminL10n.paste_data,content:'<textarea id="wpar-settings-data-import" rows="4" style="width: 100%;"></textarea>',useBootstrap:!1,theme:"material",animation:"scale",type:"green",boxWidth:"40%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:rvpAdminL10n.import_btn,action:function(){let t=this.$content.find("#wpar-settings-data-import").val();if(!t)return alert("Please enter valid settings data!"),!1;a.close(),e.dialog({title:rvpAdminL10n.importing,content:rvpAdminL10n.under_process,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1}),e.post(rvpAdminL10n.ajaxurl,{action:"wpar_process_import_data",settings_data:t,security:rvpAdminL10n.security},function(e,t){!0===e.success&&(localStorage.setItem("wpar_active_tab","general"),window.location.reload())})}},close:{text:rvpAdminL10n.close_btn,action:function(){}}}})}),e("input.wpar-reset").on("click",function(a){a.preventDefault();let n=e(this),r=n.data("action"),o=n.data("notice"),i=n.data("type");if(!o)return void t(r,n);n.attr("disabled","disabled");let s=e.confirm({title:rvpAdminL10n.warning,content:o,useBootstrap:!1,theme:"material",animation:"scale",type:i,boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:rvpAdminL10n.confirm_button,action:function(){s.close(),t(r,n)}},cancel:{text:rvpAdminL10n.cancel_button,action:function(){n.removeAttr("disabled")}}}})}),e("select.wpar-post-types").select2({placeholder:rvpAdminL10n.select_post_types}),e("select.wpar-post-statuses").select2({placeholder:rvpAdminL10n.select_post_statuses}),e("select.wpar-taxonomies").select2({placeholder:rvpAdminL10n.select_taxonomies,minimumInputLength:3,ajax:{url:rvpAdminL10n.ajaxurl,method:"POST",dataType:"json",delay:500,data:function(e){return{searchTerm:e.term,action:"wpar_process_get_taxonomies"}},processResults:function(e){return{results:e.results}},cache:!0}}),e("select#wpar_republish_allowed_authors").select2({placeholder:e(this).data("placeholder"),minimumInputLength:3,ajax:{url:rvpAdminL10n.ajaxurl,method:"POST",dataType:"json",delay:500,data:function(e){return{searchTerm:e.term,action:"wpar_process_get_users"}},processResults:function(e){return{results:e}},cache:!0}}),e("select#wpar_republish_days").select2({placeholder:rvpAdminL10n.select_weekdays}),e("#wpar_force_include, #wpar_force_exclude").select2({placeholder:rvpAdminL10n.post_ids,tags:!0,tokenSeparators:[","," "],createTag:function(e){let t=/^\d+$/;return t.test(e.term)?{id:e.term,text:e.term}:null}}),e(".wpar-datepicker").datepicker({dateFormat:"dd/mm/yy",maxDate:-1,changeMonth:!0,changeYear:!0,yearRange:"-25:+0",defaultDate:"-5y"}),e(".wpar-timepicker").timepicker({timeFormat:"HH:mm:ss",stepHour:1,stepMinute:1,stepSecond:1,showMillisec:!1,showMicrosec:!1,showTimezone:!1,timeOnly:!0});let r=(e,t,a)=>{switch(a){case"=":return e==t;case">":return e>t;case"<":return e<t;case"!=":return e!=t;case">=":return e>=t;case"<=":return e<=t}};e(".wpar-wrap").find("select.do-select2").each(function(t,a){let n=e(a).data("placeholder"),r=e(a).data("required");"yes"==r&&(n+=" (required)"),e(a).select2({placeholder:n})}),e("#wpar_enable_plugin").on("change",function(){e(this).is(":checked")&&(e(".wpar-last-run-timestamp").show(),rvpAdminL10n.is_premium?e(".sub-link-query, .sub-link-filter").removeClass("hidden"):e(".sub-links.wpar-general").removeClass("hidden")),e(this).is(":checked")||(e(".wpar-last-run-timestamp").hide(),rvpAdminL10n.is_premium?e(".sub-link-query, .sub-link-filter").addClass("hidden"):e(".sub-links.wpar-general").addClass("hidden"),localStorage.setItem("wpar_general_active_tab","configure"))}).trigger("change"),e("#wpar_republish_time_specific").on("change",function(){"yes"==e(this).val()?e(".wpar-time-limit-msg").show():e(".wpar-time-limit-msg").hide()}).trigger("change"),e(".wpar-wrap").find(".wpar-form-el[data-condition]").each(function(t,a){let n=e(a).data("condition");e(`#wpar_${n[0].replace("wpar_","")}`).on("change",function(){r(e(this).val(),n[2],n[1])?e(a).closest("tr").removeClass("wpar-c-hide").addClass("wpar-c-show").slideDown():e(a).closest("tr").removeClass("wpar-c-show").addClass("wpar-c-hide").hide()}).trigger("change")}),setTimeout(()=>{e(".wpar-wrap").find(".wpar-form-el[data-show-if]").each(function(t,a){let n=e(a).data("show-if");e(`#wpar_${n.replace("wpar_","")}`).on("change",function(){e(this).is(":checked")?e(a).closest("tr:not(.wpar-c-hide)").slideDown():e(a).closest("tr:not(.wpar-c-hide)").hide()}).trigger("change")})},150),e(window).keydown(function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e("#wpar-settings-form").submit()}}),e(".sub-links a.sub-link").on("click",function(t){t.preventDefault();let a=localStorage.getItem("wpar_active_tab");e(this).addClass("sub-active"),e(".wpar-metabox .sub-link:not(.sub-link-"+e(this).data("type")).removeClass("sub-active"),e(".wpar-metabox .wpar-"+a+":not(.sub-links)").addClass("d-none"),e(".wpar-metabox #wpar-"+e(this).data("type")).removeClass("d-none"),localStorage.setItem("wpar_"+a+"_active_tab",e(this).data("type"))}),e("select#wpar_instant_roles, select#wpar_single_roles, select#wpar_republish_rule_user_roles").select2({placeholder:rvpAdminL10n.select_user_roles}),e("#wpar_email_recipients").select2({tags:!0,tokenSeparators:[","," "],createTag:function(e){let t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e.term).toLowerCase())?{id:e.term,text:e.term}:null}}),e("#wpar_enable_single_metabox").on("change",function(){e(this).is(":checked")||e("#wpar_enable_single_republishing").prop("checked",!1).trigger("change")}).trigger("change"),e("#wpar_enable_single_republishing").on("change",function(){e(this).is(":checked")&&e("#wpar_enable_single_metabox").prop("checked",!0).trigger("change")}).trigger("change")})(jQuery);